#!/usr/bin/perl -CDS

# CJKVI-IDS to IDSgrep EIDS translator
# Copyright (C) 2013  Matthew Skala
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, version 3.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
# Matthew Skala
# http://ansuz.sooke.bc.ca/
# mskala@ansuz.sooke.bc.ca

use utf8;

$svnid='$Id: cjkvi2eids 2597 2013-11-20 02:50:58Z mskala $';

print "〖EIDS kanji decomposition dictionary generated by cjkvi2eids\n"
     ."　$svnid〗;\n";

$style=uc(shift);
if ($style eq 'A') {
  @styles=qw/G T J K V/;
} else {
  @styles=($style);
}

while (<>) {
  next if /^\s*;/; # now a slash to keep my syntax highlighter happy: /
  chomp;
  s/&([A-Z\-+_0-9]+);/<$1>;/gi;
  @fields=split("\t",$_);
  shift @fields;
  $head=shift @fields;
  print join("\n",@fields,'');
}
